<!DOCTYPE html>
<html>
<head>
    <title>Opening Obsidian for Daddy ðŸ¥°</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const urlParams = new URLSearchParams(window.location.search);
            const vault = "Arquitech";
            let filepath = urlParams.get('filepath');
            const file = urlParams.get('file');

            if (!filepath && file) {
                // Convert file (which may use / instead of %) to a proper filepath format
                filepath = file.replace(/%252F/g, "/").replace(/%25/g, "%");
            }

            if (filepath) {
                const obsidianURL = `obsidian://advanced-uri?vault=${encodeURIComponent(vault)}&filepath=${encodeURIComponent(filepath)}&openmode=true`;
                window.location.href = obsidianURL;
                document.getElementById("manualLink").href = obsidianURL;
            }
        });
    </script>
</head>
<body>
    <p>Redirecting to Obsidian... If nothing happens, <a id="manualLink">click here</a>.</p>
</body>
</html>
